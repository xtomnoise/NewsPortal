from django.db import models
from django.db.models import Sum
from django.contrib.auth.models import User
from news.models import *

User.objects.create_user('Matt')
User.objects.create_user('Joh')
u1, u2 = User.objects.all()[2:4]

Author.objects.create(user=u1)
Author.objects.create(user=u2)
a1, a2 = Author.objects.all()

Category.objects.create(category_name='Экономика')
Category.objects.create(category_name='История')
Category.objects.create(category_name='Наука')
Category.objects.create(category_name='Техника')
c1, c2, c3, c4 = Category.objects.all()

Post.objects.create(author=a1, title='Офигеть',text='Подделок и нелицензионных копий в истории автомобильных компаний было куда больше, чем может показаться. Авто Mail.ru рассказывает о самых интересных примерах из советского прошлого')
Post.objects.create(author=a1, title='Статья дня!',text='Напомним, роль Джона Сноу принесла Харингтону две номинации на премию «Эмми» («Лучший актер второго плана в драматическом сериале» в 2016 году, «Лучший актер в драматическом сериале» в 2019 году) и номинацию на «Золотой глобус».                                                                              ')
Post.objects.create(author=a2, title='Важная новость',text='В постановке принимала участие только сама Хаматова. Выступление длилось около полутора часов. За это время артистка примерила несколько образов — священника, насильника, учительницы, девочки и автора. Спектакль поставил художественный руководитель театра Алвис Херманис, который предложил актрисе работу после ее эмиграции.')
p1, p2, p3 = Post.objects.all()

p1.category.add(c1,c2,c3)
p2.category.add(c2,c3,c4)
p3.category.add(c4,c2,c3)

Comment.objects.create(user=u1,post=p1,text='Cool')
Comment.objects.create(user=u2,post=p1,text='Nice')
Comment.objects.create(user=u1,post=p1,text='Woooooooooooooooow')
Comment.objects.create(user=u1,post=p2,text='Вау')
Comment.objects.create(user=u2,post=p3,text='Не знал')
Comment.objects.create(user=u2,post=p3,text='Во дела')
k1, k2, k3, k4 = Comment.objects.all()

k1.like()
k2.like()
k1.dislike()
k3.like()
k4.like()
p1.like()
p1.dislike()
p2.like()
p3.dislike()
k1.like()
k1.dislike()
k2.dislike()
k1.dislike()
k3.like()
k4.like()
p1.dislike()
p1.like()
p2.like()
p3.dislike()
k1.like()

list(Author.objects.all().order_by('-rating').values('rating', 'user__username').first().values()) 
Post.objects.all().order_by('-rating').values('time_create', 'author__user__username', 'rating', 'title').first()

maxp = Post.objects.all().order_by('-rating').first()
Comment.objects.filter(post = maxp).values('time_create', 'user__username', 'rating', 'text') 

________________

from django.db import models
from django.db.models import Sum
from django.contrib.auth.models import User
from news.models import *
u1, u2 = User.objects.all()[2:4]
a1, a2 = Author.objects.all()
c1, c2, c3, c4 = Category.objects.all()
p1, p2, p3 = Post.objects.all()
k1, k2, k3, k4 = Comment.objects.all()
	